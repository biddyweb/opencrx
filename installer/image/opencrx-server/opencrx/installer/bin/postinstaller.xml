<project 
	name="opencrx-server-postinstaller" 
	xmlns:antcontrib="antlib:net.sf.antcontrib"
>
	<target name="postinstall">
		<mkdir dir="@@INSTALLDIR@@/apache-tomcat-6/maildir" />
		<mkdir dir="@@INSTALLDIR@@/apache-tomcat-6/airsyncdir" />
		<delete dir="@@INSTALLDIR@@/apache-tomcat-6/apps/opencrx-core-CRX" failonerror="false" />
		<delete dir="@@INSTALLDIR@@/apache-tomcat-6/apps/opencrx-apps-CRX" failonerror="false" />
		<replace 
			file="@@INSTALLDIR@@/apache-tomcat-6/conf/openejb.xml" 
			token="&lt;!-- @@OPENCRX_JDBC@@ --&gt;"
			value="&lt;Resource id=&quot;jdbc_opencrx_CRX&quot; type=&quot;DataSource&quot;&gt;&#xD;&#xA;
JdbcDriver org.hsqldb.jdbcDriver&#xD;&#xA;
JdbcUrl jdbc:hsqldb:hsql://127.0.0.1:@@HSQLDB_PORT@@/CRX_2_7&#xD;&#xA;
UserName sa&#xD;&#xA;
Password manager99&#xD;&#xA;
JtaManaged true&#xD;&#xA;
&lt;/Resource&gt;&#xD;&#xA;
&#xD;&#xA;
&lt;!--&#xD;&#xA;
&lt;Resource id=&quot;jdbc_opencrx_CRX&quot; type=&quot;DataSource&quot;&gt;&#xD;&#xA;
 JdbcDriver org.postgresql.Driver&#xD;&#xA;
 JdbcUrl jdbc:postgresql://localhost/CRX_2_7&#xD;&#xA;
 UserName postgres&#xD;&#xA;
 Password manager99&#xD;&#xA;
 JtaManaged true&#xD;&#xA;
&lt;/Resource&gt;&#xD;&#xA;
--&gt;&#xD;&#xA;
&#xD;&#xA;
&lt;!--&#xD;&#xA;
&lt;Resource id=&quot;jdbc_opencrx_CRX&quot; type=&quot;DataSource&quot;&gt;&#xD;&#xA;
 JdbcDriver oracle.jdbc.driver.OracleDriver&#xD;&#xA;
 JdbcUrl jdbc:oracle:thin:@127.0.0.1:1521:XE&#xD;&#xA;
 UserName CRX_2_7&#xD;&#xA;
 Password manager99&#xD;&#xA;
 JtaManaged true&#xD;&#xA;
&lt;/Resource&gt;&#xD;&#xA;
--&gt;&#xD;&#xA;
&#xD;&#xA;
&lt;!--&#xD;&#xA;
&lt;Resource id=&quot;jdbc_opencrx_CRX&quot; type=&quot;DataSource&quot;&gt;&#xD;&#xA;
 JdbcDriver com.ibm.db2.jcc.DB2Driver&#xD;&#xA;
 JdbcUrl jdbc:db2://127.0.0.1:50000/CRX_2_7&#xD;&#xA;
 UserName db2inst1&#xD;&#xA;
 Password manager99&#xD;&#xA;
 JtaManaged true&#xD;&#xA;
&lt;/Resource&gt;&#xD;&#xA;
--&gt;&#xD;&#xA;
&lt;!--&#xD;&#xA;
&lt;Resource id=&quot;jdbc_opencrx_CRX&quot; type=&quot;DataSource&quot;&gt;&#xD;&#xA;
 JdbcDriver com.mysql.jdbc.Driver&#xD;&#xA;
 JdbcUrl jdbc:mysql://127.0.0.1:3306/CRX_2_7&#xD;&#xA;
 UserName root&#xD;&#xA;
 Password manager99&#xD;&#xA;
 JtaManaged true&#xD;&#xA;
&lt;/Resource&gt;&#xD;&#xA;
--&gt;&#xD;&#xA;
&#xD;&#xA;
&lt;!--&#xD;&#xA;
&lt;Resource id=&quot;jdbc_opencrx_CRX&quot; type=&quot;DataSource&quot;&gt;&#xD;&#xA;
 JdbcDriver com.microsoft.sqlserver.jdbc.SQLServerDriver&#xD;&#xA;
 JdbcUrl jdbc:sqlserver://127.0.0.1:1433;databaseName=CRX_2_7;selectMethod=cursor&#xD;&#xA;
 UserName sa&#xD;&#xA;
 Password manager99&#xD;&#xA;
 JtaManaged true&#xD;&#xA;
&lt;/Resource&gt;&#xD;&#xA;
--&gt;&#xD;&#xA;
"/>

		<replace 
			file="@@INSTALLDIR@@/apache-tomcat-6/conf/openejb.xml" 
			token="&lt;!-- @@OPENCRX_MAIL@@ --&gt;"
			value="&lt;Resource id=&quot;mail/provider/CRX&quot; type=&quot;javax.mail.Session&quot;&gt;&#xD;&#xA;
mail.debug true&#xD;&#xA;
mail.transport.protocol smtp&#xD;&#xA;
mail.smtp.user myusername&#xD;&#xA;
mail.smtp.password mypassword&#xD;&#xA;
mail.smtp.starttls.enable true&#xD;&#xA;
mail.smtp.auth true&#xD;&#xA;
mail.smtp.host myhost&#xD;&#xA;
mail.smtp.port 25&#xD;&#xA;
mail.smtp.user myuseruname&#xD;&#xA;
mail.from mymailfrom&#xD;&#xA;
mail.store.protocol pop3s&#xD;&#xA;
mail.pop3s.host myhost&#xD;&#xA;
mail.pop3s.port 995&#xD;&#xA;
mail.pop3s.auth true&#xD;&#xA;
mail.pop3s.user myusername&#xD;&#xA;
mail.pop3s.password mypassword&#xD;&#xA;
&lt;/Resource&gt;&#xD;&#xA;" 
		/>
		<replace 
			file="@@INSTALLDIR@@/apache-tomcat-6/conf/openejb.xml" 
			token="CRX_2_6"
			value="CRX_2_7" 
		/>
	</target>
</project>
