-------------------------------------------------------------------

                          README openCRX/Core

-------------------------------------------------------------------

1/ What this guide is for
   ----------------------

   This README describes
   * How to build the openCRX runtime binaries
   * How to set up a development environment for ant and Eclipse

   These are the steps to build the openCRX runtime binaries:
   a) Download openCRX (see 2/)
   b) Set up for ant (see 4/)
   c) Build runtime binaries (see 5/)

   IMPORTANT: Since version 1.8 the runtime binaries are not
   distributed anymore with openCRX. They must be built after
   downloading openCRX.

   These are the steps to set up a development environment:
   a) Download openCRX (see 2/)
   b) Set up for ant (see 4/)
   c) Perform full build (see 6/)


2/ Download openCRX
   ----------------

   Get the openCRX distribution from http://www.opencrx.org/downloads.htm
   (e.g. opencrx-2.1.0-core.CRX.jre-1.5.zip)

   You also need the following openMDX distributions, which you can download
   from http://www.openmdx.org/downloads.htm:
   * openMDX/Core (e.g. openmdx-2.1.0-core.jre-1.5.zip)
   * openMDX/Portal (e.g. openmdx-2.1.0-core.jre-1.5.zip)
   * openMDX/Security (e.g. openmdx-2.1.0-security.jre-1.5.zip)
   * openMDX/WebSphere (e.g. openmdx-2.1.0-websphere.websphere-6.zip)

   openCRX requires the openMDX versions listed under
   http://www.opencrx.org/faq.htm#versioncompatibility

   IMPORTANT
   It is strongly recommended to use JDK 1.5 or JDK 6 to build openCRX/Core.


3/ Upgrading from previous version
   -------------------------------
   If you have installed a previous version of openCRX already we ask
   you to carefully read the upgrade instructions specific for your
   application server and database. Additional information is available at
   http://www.opencrx.org/documents.htm and http://www.opencrx.org/faq.htm#upgrade.

   Upgrading from openCRX 2.0.0 -> 2.1.0
   See http://www.opencrx.org/faq.htm#200to210

   Upgrading from openCRX 1.11.0 -> 2.0.0
   See http://www.opencrx.org/faq.htm#111to200

   Upgrading from openCRX 1.10.0 -> 1.11.0
   See http://www.opencrx.org/faq.htm#110to111

   Upgrading from openCRX 1.9.1 -> 1.10.0
   See http://www.opencrx.org/faq.htm#191to110

   Upgrading from openCRX 1.8.1 -> 1.9.1
   See http://www.opencrx.org/faq-upgrade.htm#181to19

   Upgrading from previous openCRX versions
   See http://www.opencrx.org/faq-upgrade.htm


4/ Setting up for Ant
   ------------------
   (hint: Ant is available from http://ant.apache.org/)

   Unzip the openCRX distribution to a project folder of your choice.
   The top level structure of the unzipped folder should look as follows:

   opencrx-2.1.0
     core
       deliverables
       build.xml
       LICENSE
       README
       RELEASE-NOTES
       version.properties
     [jre-1.5]
     source-archive

   As a next step you must install openMDX/Core, openMDX/Portal, openMDX/Security 
   and openMDX/WebSphere distributions to the directory opencrx-2.1.0/opt:

   * Extract openmdx-2.1.0-core.jre-1.5 to opencrx-2.1.0/opt
   * Extract openmdx-2.1.0-portal.jre-1.5 to opencrx-2.1.0/opt
   * Extract openmdx-2.1.0-security.jre-1.5.zip to opencrx-2.1.0/opt
   * Extract openmdx-2.1.0-websphere.websphere-6 to opencrx-2.1.0/opt

   The directory structure should now look as follows:

   opencrx-2.1.0
     core
       build.xml
       LICENSE
       README
       RELEASE-NOTES
       version.properties
     [jre-1.5]
     source-archive
     opt
       openmdx-2.1.0
         ant
         core
         java2
         [jre-1.5]
         portal
         security
         source-archive

   Now open a shell and cd to the directory opencrx-2.1.0/core. Verify
   the environment settings with

   > ant config

   The output should look like (on Windows platforms):

     [echo] user.build.properties          = [+] ~\build.properties
     [echo] target.platform.properties     = [-] C:\pj\opencrx\core/jre-1.5-properties.xml
     [echo] java.platform.properties       = [+] C:\pj\opencrx\opt\openmdx-2.1.0/ant/etc/ant/jre-1.5-properties.xml
     [echo] project.build.properties       = [+] C:\pj\opencrx\core\build.properties
     [echo] project.version.properties     = [+] C:\pj\opencrx\core\version.properties
     [echo]
     [echo] ant.home                       = C:\pgm\apache-ant-1.7.0
     [echo] openmdx.home                   = C:\pj\opencrx\opt\openmdx-2.1.0
     [echo] java.home                      = C:\pgm\Java\jdk1.6.0\jre
     [echo] project.home                   = C:\pj\opencrx
     [echo]
     [echo] build.target.jre               = [+] C:\pgm\Java\jdk1.5.0\jre
     [echo] JRE_12                         = [-]
     [echo] JRE_13                         = [-]
     [echo] JRE_14                         = [+] c:\pgm\Java\j2sdk1.4.2\jre
     [echo] JRE_15                         = [+] C:\pgm\Java\jdk1.5.0\jre
     [echo]
     [echo] ant.version                    = Apache Ant version 1.7.0 compiled on December 13 2006
     [echo] ant.java.version               = 1.6
     [echo] ant.project.name               = opencrx-core
     [echo]
     [echo] basedir                        = C:\pj\opencrx\core
     [echo] base.dir.name                  = core
     [echo] build.dir                      = C:\pj\opencrx\core\build\jre-1.5
     [echo] tmp.dir                        = C:\pj\opencrx\core\build\jre-1.5\tmp
     [echo] log.dir                        = C:\pj\opencrx\core\build\jre-1.5\log
     [echo] deliver.dir                    = C:\pj\opencrx\jre-1.5\core
     [echo] distribution.dir               = C:\pj\opencrx\distribution
     [echo]
     [echo] project.vendor.name            = "openCRX"
     [echo] project.vendor.id              = "org.opencrx"
     [echo] project.specification.title    = openCRX/Core
     [echo] project.specification.version  = 1.11
     [echo] project.implementation.version = 2.1.0
     [echo] project.implementation.prefix  = opencrx
     [echo] project.platform.list          = jre-1.5
     [echo]
     [echo] build.target.platform          = [+] jre-1.5
     [echo] build.java.platform            = jre-1.5
     [echo] build.target.version           = 1.5
     [echo] build.source.version           = 1.5
     [echo] build.debug                    = on
     [echo] build.optimize                 = off
     [echo]
     [echo] unix.distribution              = not set
     [echo] source.distribution            = true
     [echo] distribution.format            = zip
   As a next step you must install the sources:

   > ant install-src

   This expands the source-archive and creates the directory
   opencrx-2.1.0/core/src.


5/ Building the EARs
   -----------------
   To build J2EE enterprise archives (EAR) open a shell and cd to the directory
   opencrx-2.1.0/core. Start the build with

   > ant assemble

   This builds the following runtime binaries:
   * jre-1.5\core\deployment-unit\CRX\opencrx-core-CRX-App.ear
   * jre-1.5\core\deployment-unit\CRX\opencrx-core-CRX-Web.ear

   You are now ready to deploy the binaries to an application server. Follow the
   corresponding application server installation guide.


6/ Full Build for Development
   --------------------------
   You perform a full build of openCRX/Core by with the target 'all':

   > ant all

   Builds all deliverables and distributions.

   > ant distribution

   Builds the distribution for jre-1.5. The distributions are located in
   opencrx-2.1.0\distribution.

   IMPORTANT
   If the build process fails with java.lang.OutOfMemoryError you
   can increase the max available memory for the build process by
   setting
   > set ANT_OPTS=-Xmx512m (Windows)
   > export ANT_OPTS=-Xmx512m (Unix)


7/ Setting up for Eclipse
   ----------------------
   If you set up an Eclipse project then consider the following:

   - Make sure that you first install and build openCRX with Ant as described
     in section 3/.
   - Create a project in the directory core. Core is in fact an openCRX project
     folder. In the future additional projects will be located at the same
     level as core. If you have a distribution of openMDX under Eclipse then
     you can add a dependency to the openMDX/Core Eclipse project. If you only
     have the openMDX binaries, you must add the libraries to the project:

     jre-1.5
     * jre-1.5/core/lib
     * java2/jre-1.5/enterprise/lib
     * java2/jre-1.5/extension/lib


8/ Database support
   ----------------
   See database installation guides.


---
End of README
