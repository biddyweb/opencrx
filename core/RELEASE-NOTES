Release Name: openCRX/Core 2.5.3
Release Date: 2009-10-30

---------------------------------------------------------------------
Notes:
This software is published under the BSD license
as listed below.

Copyright (c) 2004-2009, CRIXP Corp., Switzerland
All rights reserved.

Redistribution and use in source and binary forms, with or without 
modification, are permitted provided that the following conditions 
are met:

* Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in
the documentation and/or other materials provided with the
distribution.

* Neither the name of CRIXP Corp. nor the names of the contributors
to openCRX may be used to endorse or promote products derived
from this software without specific prior written permission


THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS
BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.	

------------------

This product includes software developed by the Apache Software
Foundation (http://www.apache.org/).

This product includes software developed by contributors to
openMDX (http://www.openmdx.org/)

---------------------------------------------------------------------

0.    SUMMARY
      * CalDAV servlet
      * Dashboards
      * GUI for mobile browsers
      * Migration to openMDX 2 architecture. Removal of EJBs and migration
        to entity manager architecture.
      * Bug fixes
            
      For more information see below and http://www.opencrx.org/opencrx/2.5/new.htm

==============================================================================
Version 2.5.3                                                       2009-10-30
==============================================================================

1.    NEW FEATURES
            
      CR20018858
      Portal: DashboardControl. DashboardControl and wizard which 
      allows to manage dashlets.             
            
      CR10008432
      Add GUI mode which is optimized for mobile browsers. Currently tested
      and supported is Safari for iPhone and desktop browsers.
      
      CR10008878
      EMailRecipientDataBinding. Data binding to manage recipients of EMail activity.
      Here is a sample customizing:
      
		<org.openmdx.ui1.StructuralFeatureDefinition qualifiedName="org:opencrx:kernel:activity1:EMail:to0">
		      <_object>
			<type>org:opencrx:kernel:account1:EMailAddress</type>
			<multiplicity>0..1</multiplicity>
			<changeable>true</changeable>
		      </_object>
		      <_content/>
		</org.openmdx.ui1.StructuralFeatureDefinition>
		<org.openmdx.ui1.StructuralFeatureDefinition qualifiedName="org:opencrx:kernel:activity1:EMail:to1">
		      <_object>
			<type>org:opencrx:kernel:account1:EMailAddress</type>
			<multiplicity>0..1</multiplicity>
			<changeable>true</changeable>
		      </_object>
		      <_content/>
		</org.openmdx.ui1.StructuralFeatureDefinition>
		
		...
		
		<org.openmdx.ui1.ElementDefinition name="org:opencrx:kernel:activity1:EMail:to0">
		    <_object>
			<dataBindingName>org.opencrx.kernel.portal.EMailRecipientDataBinding?index=0;partyType=220</dataBindingName>
			<active>true</active>
			<filterable>false</filterable>
			<toolTip>
			  <_item>TO</_item>
			</toolTip>
			<label>
			  <_item>TO</_item>
			</label>
			<order>
			  <_item>0</_item>
			  <_item>0</_item>
			  <_item>80</_item>
			</order>
		    </_object>
		<_content/>
		</org.openmdx.ui1.ElementDefinition>
		<org.openmdx.ui1.ElementDefinition name="org:opencrx:kernel:activity1:EMail:to1">
		    <_object>
			<dataBindingName>org.opencrx.kernel.portal.EMailRecipientDataBinding?index=1;partyType=220</dataBindingName>
			<active>true</active>
			<filterable>false</filterable>
			<toolTip>
			  <_item>TO</_item>
			</toolTip>
			<label>
			  <_item>TO</_item>
			</label>
			<order>
			  <_item>0</_item>
			  <_item>0</_item>
			  <_item>81</_item>
			</order>
		    </_object>
		<_content/>
		</org.openmdx.ui1.ElementDefinition>  
		       
      
2.    CHANGES

2.0.  CHANGED FEATURES
      
      CR10008870
      The schema paths in the ui and code files have to be changed:
      * xri:+resource/org/openmdx/ui1/xmi/ui1.xsd --> xri://+resource/org/openmdx/ui1/xmi1/ui1.xsd
      * xri:+resource/org/opencrx/kernel/code1/xmi/code1.xsd --> xri://+resource/org/opencrx/kernel/code1/xmi/code1.xsd
      Files in custom projects have to be adapted correspondingly. The following commands do the job:
	  * grep -rl 'xri:+resource/org/openmdx/ui1/xmi/ui1.xsd' . | xargs sed -i -e 's/xri:+resource\/org\/openmdx\/ui1\/xmi\/ui1.xsd/xri:\/\/+resource\/org\/openmdx\/ui1\/xmi1\/ui1.xsd/'
      * grep -rl 'xri:+resource/org/opencrx/kernel/code1/xmi/code1.xsd' . | xargs sed -i -e 's/xri:+resource\/org\/opencrx\/kernel\/code1\/xmi\/code1.xsd/xri:\/\/+resource\/org\/opencrx\/kernel\/code1\/xmi1\/code1.xsd/      
      Also the _operation tag in the code files have to be fixed:
      grep -rl '_operation=\"create\"' . | xargs sed -i -e 's/_operation=\"create\"/_operation=\"set\"/'
             
2.1.  FIXED BUGS
      
2.2   REMOVED FEATURES
      none

      
==============================================================================
Version 2.5.2                                                       2009-09-14
==============================================================================

1.    NEW FEATURES
      
      CR10008773
      PortalExtension: queries for customized feature definitions. The method
      PortalExtension_1_0.getQuery() allows to specify user-defined queries.
      The method takes as parameter the field and the filter value. Identity
      columns for example require user-defined queries. 
      
      CR10008709
      Favorites with xri of current object. Favorites which are invoked on the 
      current object can be defined as follows:
      1. Set favorite's reference to null. The favorite's reference is then
         set to current object.
      2. The macro $XRI is replaced with the XRI of the currently selected object.
         Example:
         window.location.href='./wizards/en_US/CreateWorkAndExpenseRecord.jsp?xri=$XRI'; 
      
      CR10008577
      CalDAV servlet added to EAR. 
      
      With iPhone 3 connect as follows:
      1) With standard GUI go to user home of user {login} and create a calendar 
         profile {P}. 
      2) Attach one are more calendar feeds pointing to an activity group or 
         activity filter. Set active to true and background color to some value, 
         e.g. #112233.
      3) On iPhone subscribe to calendar with 
         url http://host:port/opencrx-caldav-CRX/CRX/Standard/user/{login}/profile/{P}      
                  
      With Sunbird connect as follows:
      1) Subscribe to calendar with URL 
         http://host:port/opencrx-caldav-CRX/CRX/Standard/tracker/{tracker name}[/filter/{filter name}]
      
      CR10007844
      Portal: support for Wiki tags. Text fields are rendered client-side using
      Wiky. For more information about features and supported Wiki tags
      see http://goessner.net/articles/wiky/. 
      
2.    CHANGES

2.0.  CHANGED FEATURES
      
      CR10008803: isAllDayEvent
      isAllDayEvent is currently modeled as persistent attribute.
      * isAllDayEvent should be derived. It is true, if scheduledStart and scheduledEnd do not 
        specify a time, i.e. 00:00:00.000
      * Add operation markAsAllDayEvent() which resets the time of scheduledStart and scheduledEnd.
            
      CR10008789: Deprecate EJBs
      Deprecate Kernel and Security Dataprovider EJBs in favor of REST plug-ins.
        
      CR10008788: Rename ContractPosition
      Rename the abstract class ContractPosition to AbstractContractPosition.
      
                  
2.1.  FIXED BUGS
      
2.2   REMOVED FEATURES
      none

      
==============================================================================
Version 2.5.1                                                       2009-07-22
==============================================================================

1.    NEW FEATURES
      
      CR10008599
      Birthday calendars. Generation of birthday calendars added to ICal servlet. 
      Sample URL is: http://localhost:8080/opencrx-ical-CRX/bdays?id=CRX/Standard/filter/Accounts~all&alarm=true&max=100
      Parameters:
      * id: account filter.
      * alarm: true|false. Generate alarm tag. Default is false.
      * max: Generate events for max accounts. Default is 500.
      * icalType: VTODO|VEVENT. Default is VEVENT.
      * year: Generate events for years [year-1, year, year+1]. Default is current year. 
      * categories: CATEGORIES attribute. Default is Birthday
      * summaryPrefix: Prefix for attribute SUMMARY. Default is ""
            
      CR10008602
      Redesign Grid Follow-Ups. Add FormattedFollowUpDataBinding which formats
      the fields transition, assignedTo, createdAt, modifiedAt of an ActivityFollowUp. 
      
2.    CHANGES

2.0.  CHANGED FEATURES
      
      CR10008700
      Database: improve case-insensitive search. UPPER(column) LIKE UPPER(?) 
      does not work for all databases. 
            
      CR10008581
      Upgrade Timeline to version 2.3.0.
            
2.1.  FIXED BUGS
      
      SF2808264
      Setup-Problem with 2.5.0 on Tomcat and DB2. OpenCrxSecurity_1 plugin fixed. This
      fixes the following reported errors:
      1) User creation error
      2) Start openCRX with empty database
      3) Change password
            
      CR10008615
      vCard Importer appends postalStreet. Importing the same vCard multiple 
      times leads to unwanted extra lines in postalStreet; it seems that the 
      importer just appends the imported lines to postalStreet instead of 
      replacing existing lines with the imported lines. 
      
      CR10008609
      ui/code-merge/split broken. Parameter sourceDir ignored/not correctly injected? 
            
      CR10008595
      pg script dbcreate-table.sql of v2.5.0 is no good. Use TIMESTAMP WITH TIME ZONE 
      instead of ABSTIME. 

2.2   REMOVED FEATURES
      none


==============================================================================
Version 2.5.0                                                       2009-06-08
==============================================================================

1.    NEW FEATURES
      
      CR10008468
      Final PrincipalGroups. Add flag to mark PrincipalGroups as final. Access 
      level deep does not calculate subgroups for final principal groups. isFinal
      can therefore be used to fine-control the behaviour of access level deep.

2.    CHANGES

2.0.  CHANGED FEATURES
      
      CR10008468
      Final PrincipalGroups. Add flag to mark PrincipalGroups as final. The access
      control plugin does not subgroups for final principal groups in case of
      accessLevelBrowse=access level deep. 
       
      CR10008467
      Work and Expense record. Extend existing work record so that expenses 
      can be stored as well. Wizard CreateWorkAndExpenseRecord which allows
      user-friendly management of work and expense records. 
            
      CR10007950
      Migrate application plugin to openMDX 2 architecture. Backend classes
      in package org.opencrx.kernel.backend are fully rewritten. The backend
      now uses the typed jmi1 openCRX API instead of the deprecated, generic 
      openMDX 1 RequestCollection/DataproviderObject API. A backend is now 
      organized as library. The methods can be used in wizards, portal 
      extensions, data bindings or backend extensions. beClass.getInstance(), 
      e.g. Accounts.getInstance() allows an easy-to-use lookup. The standard 
      backend classes can be overriden by user-defined implementations.
      This way the standard openCRX business-logic can easily be adapted and
      extended.
      
      A user-defined backend class can be added as follows:
      
      1. Write a class which extends one of the standard backend classes, 
      e.g. Accounts as follows:
      
      package com.mycompany.opencrx.backend;

      public class Accounts extends org.opencrx.kernel.backend.Accounts {

	    public static void register(
	    ) {
		    registerImpl(new com.mycompany.opencrx.backend.Accounts());
	    }
	
        protected Accounts(
        ) {
        }
        
        ...
      }

      2. Extend the standard Configuration class and register your backend 
      class as follows:

      package com.mycompany.opencrx.backend;
            
      public class Configuration extends org.opencrx.kernel.aop2.Configuration {

	    public Configuration(
        ) {
		   super();
		   com.mycompany.opencrx.backend.Accounts.register();
	    }
	
      }
              
      3. Register the configuration class in 
      src/ear/opencrx-core-CRX.ear/gateway.jar/META-INF/ejb-jar.xml. This can
      be done by adapting the entry configuration.class.name in the
      build.properties file.
      
      
      CR10008417
      Replace openMDX/Log by SLF4J / JDK Logger. The sub-project openMDX/Log is
      not used anymore by openCRX. Tomcat+OpenEJB can therefore be configured
      as follows:
      * Option -Dorg.openmdx.log.config.filename can be removed and corresponding
        log properties file can be removed
      * Update CATALINA_HOME/bin/tomcat-juli.jar from openmdx/jre-1.5/core/lib
      * Update CATALINA_HOME/lib/openmdx-base.jar from openmdx/jre-1.5/core/lib
      * Add slf4j-jdk14-1.5.6.jar to CATALINA_HOME/lib
      * Remove slf4j-openmdx1.jar from CATALINA_HOME/lib
      * Adapt log configuration in CATALINA_HOME/conf/logging.properties to your needs
      * Remove LogConsoleServlet from customized web.xml
            
2.1.  FIXED BUGS
      
      SF329844
      So I did a post with the following settings:  
      POST http://localhost:8080/opencrx-rest-CRX/org.opencrx.kernel.account1/provider/CRX/segment/Standard/account/7wmWgCjdEd6ri3Nu6Dapag/member 
      <?xml version="1.0"?> 
      <org.opencrx.kernel.account1.Member> 
        <name>MyName</name> 
        <account>xri://@openmdx*org.opencrx.kernel.account1/provider/CRX/segment/Standard/account/NI7XwEIBEd29BeMf4vj8cA</account> 
      </org.opencrx.kernel.account1.Member> 
      NI7XwEIBEd29BeMf4vj8cA should become a member of 7wmWgCjdEd6ri3Nu6Dapag. 
      Anyway, I get a server error, without using the account argument all is fine.      

2.2   REMOVED FEATURES
      none
      
---
